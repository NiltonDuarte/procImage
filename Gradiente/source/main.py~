# -*- coding: utf-8 -*-
from eyeTracking import *
import cv2
import numpy as np




img = cv2.imread('face3.png',0)



eT = eyeTracking((287, 166), (397, 170))



cap = cv2.VideoCapture('moving.mov')
ret = True

rightPos = []
leftPos = []

#janela de tamanho 23 right = [(397, 170), (394, 171), (390, 172), (384, 171), (378, 172), (373, 171), (368, 172), (363, 171), (358, 171), (353, 172), (348, 173), (344, 175), (339, 177), (335, 177), (331, 177), (326, 178), (323, 178), (321, 179), (318, 179), (317, 179), (320, 176), (318, 179), (322, 177), (324, 177), (327, 178), (328, 182), (332, 182), (340, 180), (344, 184), (350, 185), (358, 182), (364, 186), (371, 183), (378, 186), (387, 182), (394, 182), (401, 185), (412, 174), (415, 163), (419, 165), (423, 166), (428, 177), (432, 166), (439, 176), (446, 165), (453, 175), (459, 164), (467, 175), (468, 164), (479, 175), (484, 164), (495, 175), (496, 164), (507, 175), (510, 164), (521, 175), (532, 178), (543, 179), (552, 180), (557, 183), (562, 184), (565, 184), (567, 184), (569, 185), (569, 185), (570, 185), (570, 186), (568, 187), (566, 186), (561, 186), (557, 186), (552, 186), (548, 186), (544, 185), (540, 196), (530, 185), (521, 186), (513, 186), (505, 185), (496, 186), (487, 177), (483, 181), (476, 180), (468, 182), (459, 182), (449, 173), (447, 181), (437, 172), (430, 181), (421, 171), (415, 180), (405, 170), (402, 177), (393, 178), (384, 179), (374, 171), (370, 180), (360, 170), (354, 181), (344, 172), (340, 178), (332, 179), (326, 179), (320, 179), (315, 179), (311, 180), (308, 180), (306, 180), (304, 181), (305, 180), (305, 180), (307, 180), (310, 180), (314, 179), (318, 179), (323, 180), (328, 179), (334, 174), (342, 174), (351, 174), (360, 174), (369, 174), (377, 174), (387, 174), (396, 173), (405, 173), (415, 172), (425, 172), (436, 172), (446, 173), (453, 173), (461, 173), (472, 173), (483, 174), (492, 178), (500, 174), (510, 176), (519, 176), (528, 176), (537, 181), (544, 184), (552, 184), (559, 180), (567, 180), (573, 184), (581, 181), (588, 182), (595, 184), (601, 185), (606, 185), (610, 186), (613, 186), (615, 186), (616, 186), (616, 187), (615, 186), (611, 184), (608, 184), (605, 184), (601, 184), (597, 182), (591, 181), (585, 180), (578, 180), (571, 179), (566, 179), (557, 181), (548, 170), (544, 178), (534, 176), (526, 177), (516, 179), (508, 169), (504, 176), (494, 179), (505, 170), (495, 181), (490, 176), (482, 177), (472, 175), (465, 176), (457, 176), (449, 178), (441, 177), (433, 178), (425, 177), (417, 178), (409, 178), (401, 178)]




while(cap.isOpened() and ret):
	ret, frame = cap.read()
	#frame = img

	if ret:
		gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
		grayg = cv2.GaussianBlur(gray,(7,7),2);

		print "EyeTrack"
		eT.setImg(grayg)
		eT.eyeTracking()
		
		#print "right eye", eT.rightEyeCoord
		cv2.circle(frame, eT.rightEyeCoord, 3,  255, 2, 8, 0 )
		cv2.circle(frame, eT.leftEyeCoord, 3,  255, 2, 8, 0 )
		#print "eT.rightEyeCoord = ", eT.rightEyeCoord
		rightPos.append(eT.rightEyeCoord)
		leftPos.append(eT.leftEyeCoord)
		print rightPos
		print leftPos

		cv2.imshow('frame',frame)
		if cv2.waitKey(1) & 0xFF == ord('q'):
			break
		#a = raw_input("da enter")




cap.release()
cv2.destroyAllWindows()

